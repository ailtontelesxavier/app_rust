<!-- Modal de confirmação de exclusão -->
<dialog id="delete_modal" class="modal">
    <div class="modal-box">
        <h3 class="font-bold text-lg">Confirmar Exclusão</h3>
        <p class="py-4">Tem certeza que deseja excluir o módulo "<span id="module_name_to_delete"></span>"?</p>
        <p class="text-sm text-gray-500 mb-4">Esta ação não pode ser desfeita.</p>
        <div class="modal-action">
            <form method="dialog">
                <button class="btn">Cancelar</button>
            </form>
            <form>
                <div class="mb-4">
                <label for="new_password">Nova Senha</label>
                <div class="flex items-center">
                    <input type="password" name="new_password" id="new_password" class="input min-w-full" autocomplete="off">
                    <span class="-ml-10 hover:cursor-pointer" type="button" id="togglePassword">
                    {{eye()}}
                    </div>
                </span>
                </div>
            </form>
            <button id="confirm_delete" class="btn btn-error">Excluir</button>
        </div>
    </div>
    <form method="dialog" class="modal-backdrop">
        <button>close</button>
    </form>
</dialog>

<script>
    let moduleToDelete = null;

    // Função para abrir modal de exclusão
    function openDeleteModal(id, name) {
        moduleToDelete = id;
        document.getElementById('module_name_to_delete').textContent = name;
        document.getElementById('delete_modal').showModal();
    }

    // Confirmar exclusão
    document.getElementById('confirm_delete').addEventListener('click', function() {
        if (moduleToDelete) {
            // Implementar lógica de exclusão aqui
            // Por exemplo, fazer uma requisição DELETE ou POST para excluir
            fetch(`/permissao/perfil/${moduleToDelete}`, {
                method: 'DELETE',
                headers: {
                    'Content-Type': 'application/json',
                }
            })
            .then(response => {
                if (response.ok) {
                    // Recarregar a página ou remover o item da lista
                    window.location.reload();
                } else {
                    alert('Erro ao excluir módulo');
                }
            })
            .catch(error => {
                console.error('Erro:', error);
                alert('Erro ao excluir módulo');
            });
        }
        document.getElementById('delete_modal').close();
    });

    // exibir a senha ou ocultar
    document.getElementById("togglePassword").addEventListener("click", function () {
      const passwordInput = document.getElementById("new_password");
      
      if (passwordInput.type === "password") {
        passwordInput.type = "text";
      } else {
        passwordInput.type = "password";
      }
    });
</script>